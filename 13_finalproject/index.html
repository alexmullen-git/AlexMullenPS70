<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FINAL PROJECT</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="../style.css" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #e8ecf1 100%);
      min-height: 100vh;
      color: #2d3748;
      line-height: 1.7;
    }

    .modern-nav {
      background: linear-gradient(135deg, #c90016 0%, #a00012 100%);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      padding: 1.5rem 0;
    }

    .nav-title {
      font-weight: 700;
      font-size: 1.75rem;
      letter-spacing: -0.5px;
      color: #ffffff;
      margin: 0;
    }

    .nav-link {
      font-weight: 500;
      padding: 0.75rem 1.5rem;
      border-radius: 12px;
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      border: 2px solid rgba(255, 255, 255, 0.2);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      text-decoration: none;
      color: #ffffff;
    }

    .nav-link:hover {
      background: rgba(255, 255, 255, 0.25);
      border-color: rgba(255, 255, 255, 0.4);
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
      color: #ffffff;
    }

    .textcontainer {
      max-width: 1200px;
      margin: 0 auto;
      padding: 3rem 2rem;
    }

    .page-header {
      text-align: center;
      margin-bottom: 4rem;
      animation: fadeInUp 0.6s ease-out;
    }

    .page-header h1 {
      font-size: 3rem;
      font-weight: 700;
      color: #1a202c;
      margin-bottom: 1rem;
      letter-spacing: -1px;
    }

    .page-header p {
      font-size: 1.25rem;
      color: #718096;
      font-weight: 400;
    }

    .view-toggle {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin-bottom: 3rem;
      animation: fadeInUp 0.6s ease-out;
      animation-delay: 0.2s;
      animation-fill-mode: both;
    }

    .toggle-btn {
      padding: 1rem 2.5rem;
      font-size: 1.1rem;
      font-weight: 600;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
      background: #ffffff;
      color: #4a5568;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    }

    .toggle-btn span {
      position: relative;
      z-index: 1;
      transition: color 0.3s ease;
    }

    .toggle-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
    }

    .toggle-btn:hover:not(.active) {
      background: #f7fafc;
    }

    .toggle-btn.active {
      background: linear-gradient(135deg, #c90016 0%, #a00012 100%);
      color: #ffffff;
      box-shadow: 0 4px 15px rgba(201, 0, 22, 0.3);
    }

    .toggle-btn.active span {
      color: #ffffff;
    }

    .content-section {
      display: none;
      animation: fadeInUp 0.5s ease-out;
    }

    .content-section.active {
      display: block;
    }

    .assignment-card {
      background: #ffffff;
      border-radius: 20px;
      padding: 2.5rem;
      margin-bottom: 3rem;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      animation: fadeInUp 0.6s ease-out;
      animation-fill-mode: both;
    }

    .assignment-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.12);
    }

    .assignment-title {
      font-size: 2rem;
      font-weight: 600;
      color: #c90016;
      margin-bottom: 1.5rem;
      padding-bottom: 1rem;
      border-bottom: 3px solid #e2e8f0;
    }

    .assignment-content {
      font-size: 1.1rem;
      color: #4a5568;
      line-height: 1.8;
      margin-bottom: 2rem;
    }

    .video-embed-wrapper {
      position: relative;
      width: 100%;
      padding-bottom: 56.25%; /* 16:9 aspect ratio */
      height: 0;
      overflow: hidden;
      border-radius: 16px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
      margin-bottom: 2rem;
      background: #000;
    }

    .video-embed-wrapper iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: none;
    }

    .media-gallery {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
      margin: 2rem 0;
    }

    .media-item {
      position: relative;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      background: #f7fafc;
    }

    .media-item:hover {
      transform: scale(1.03);
      box-shadow: 0 12px 32px rgba(0, 0, 0, 0.15);
    }

    .media-item img {
      width: 100%;
      height: auto;
      display: block;
      transition: transform 0.3s ease;
    }

    .media-item:hover img {
      transform: scale(1.05);
    }

    .media-item video {
      width: 100%;
      height: auto;
      display: block;
    }

    .media-item.smaller {
      max-width: 400px;
      margin: 0 auto;
    }

    .back-button {
      display: inline-flex;
      align-items: center;
      gap: 0.75rem;
      padding: 1rem 2rem;
      background: linear-gradient(135deg, #c90016 0%, #a00012 100%);
      color: #ffffff;
      border: none;
      border-radius: 12px;
      font-weight: 600;
      font-size: 1rem;
      text-decoration: none;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 4px 15px rgba(201, 0, 22, 0.3);
      margin: 2rem 0;
      cursor: pointer;
    }

    .back-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(201, 0, 22, 0.4);
      color: #ffffff;
    }

    .download-button {
      display: inline-flex;
      align-items: center;
      gap: 0.75rem;
      padding: 1rem 2rem;
      background: linear-gradient(135deg, #c90016 0%, #a00012 100%);
      color: #ffffff;
      border: none;
      border-radius: 12px;
      font-weight: 600;
      font-size: 1rem;
      text-decoration: none;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 4px 15px rgba(201, 0, 22, 0.3);
      margin: 0.5rem;
      cursor: pointer;
    }

    .download-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(201, 0, 22, 0.4);
      color: #ffffff;
    }

    .download-button::before {
      content: "⬇️";
      font-size: 1.2rem;
    }

    .download-buttons-group {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 1rem;
      margin-top: 2rem;
    }

    .step-title {
      font-size: 1.75rem;
      font-weight: 600;
      color: #c90016;
      margin-top: 2rem;
      margin-bottom: 1rem;
      padding-bottom: 0.5rem;
      border-bottom: 2px solid #e2e8f0;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @media (max-width: 768px) {
      .page-header h1 {
        font-size: 2rem;
      }

      .assignment-card {
        padding: 1.5rem;
      }

      .assignment-title {
        font-size: 1.5rem;
      }

      .textcontainer {
        padding: 2rem 1rem;
      }

      .media-gallery {
        grid-template-columns: 1fr;
        gap: 1.5rem;
      }
    }
  </style>
</head>

<nav class="navbar navbar-expand-sm navbar-dark modern-nav">
  <div style="align-items: center; justify-content: center;" class="container-fluid">
    <div class="flexrow">
      <h2 class="nav-title">Final Project</h2>
    </div>
    <div class="navbar-nav">
      <h4><a class="nav-link" href="../index.html">Home</a></h4>
      <h4><a class="nav-link" href="../about.html">About</a></h4>
    </div>
  </div>
</nav>

<body>
<div class="textcontainer">
  <div class="page-header">
    <h1>Final Project: Water-Filling Table</h1>
    <p>The ultimate automated cup-filling system</p>
  </div>

  <div class="view-toggle">
    <button class="toggle-btn active" id="finalProjectBtn" onclick="switchView('finalProject')">
      <span>Final Project</span>
    </button>
    <button class="toggle-btn" id="documentationBtn" onclick="switchView('documentation')">
      <span>Documentation</span>
    </button>
  </div>

  <div id="finalProjectContent" class="content-section active">
    <div class="assignment-card">
      <div class="video-embed-wrapper">
        <iframe src="https://www.youtube.com/embed/rLxY8W9E1YI" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
      </div>
      <div class="assignment-content">
        Have you ever finished your drink at the dinner table and then had to take the walk of shame all the way to the fridge (or in my case, across Annenberg to the water filling station) to refill your cup? I wish that my home and Annenberg had the conveniences of being at a restaurant with waiters to help me with everything!
      </div>
      <div class="assignment-content">
        Now, with my water-filling table, you no longer need to get off your lazy butt to fill your cup! Simply place your cup in the sensing areas of the table then press the button. A magical stream of water will shoot up and land perfectly in your cup to quench your thirst.
      </div>
      <h2 class="assignment-title" style="margin-top: 2rem;">Media Gallery</h2>
      <div class="media-gallery">
        <div class="media-item">
          <img src="./final1.jpg" alt="Final project image 1">
        </div>
        <div class="media-item">
          <img src="./final2.jpg" alt="Final project image 2">
        </div>
        <div class="media-item">
          <video controls autoplay loop muted playsinline>
            <source src="./finalTest1.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        </div>
        <div class="media-item">
          <video controls autoplay loop muted playsinline>
            <source src="./finalTest2.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        </div>
        <div class="media-item">
          <video controls autoplay loop muted playsinline>
            <source src="./finalTest3.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        </div>
        <div class="media-item">
          <video controls autoplay loop muted playsinline>
            <source src="./finalTest4.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        </div>
        <div class="media-item">
          <video controls autoplay loop muted playsinline>
            <source src="./finalTest5.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        </div>
        <div class="media-item">
          <video controls autoplay loop muted playsinline>
            <source src="./finalTest6.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        </div>
      </div>
    </div>
  </div>

  <div id="documentationContent" class="content-section">
    <div class="assignment-card">
      <h2 class="assignment-title">Project Documentation</h2>
      
      <div class="step-title">Step One: Locating materials</div>
      <div class="assignment-content">
        Building off the MVP from earlier in the semester, I needed to find a way for the nozzle to utilize a hose that is easier to maneuver for the nozzle. I found some tubing that was half the size and made of silicone, so it was very flexible and easy to work with. I decided to continue with the water pump from MVP week since it is rated for ~300 gph and when optimized with the proper nozzle I believe it can provide the proper pressure.
      </div>

      <div class="step-title">Step Two: Initial Redesign</div>
      <div class="assignment-content">
        I started by 3D printing an adapter from the water pump's 13mm (internal diameter) hose to my new 6mm silicone hose, this was easy since I already experimented with barbed adapters during MVP week. Afterwards, I made a few nozzles with varying tapers and end diameters. I finally landed on a nozzle that had a 3mm internal diameter with no taper.
      </div>
      <div class="media-gallery">
        <div class="media-item smaller">
          <img src="./nozzleOptimization.jpg" alt="Nozzle optimization">
        </div>
      </div>

      <div class="assignment-content">
        Next, I worked on the gimbal/directional component. Taking inspiration from the design below, I designed a nozzle adapter that mounted to the servo and had a pivoting mechanism that linked to a servo horn using a rod (I used a paper clip). After the proof-of-concept, I designed and printed a print-in-place mechanism that would prevent the pivoting section from sliding out of position.
      </div>
      <div class="media-gallery">
        <div class="media-item">
          <img src="./Reference.jpg" alt="Reference design">
        </div>
        <div class="media-item">
          <img src="./nozzleAssembly1.0.jpg" alt="Nozzle assembly 1.0">
        </div>
        <div class="media-item">
          <img src="./nozzleAssembly1.1.jpg" alt="Nozzle assembly 1.1">
        </div>
        <div class="media-item">
          <img src="./nozzleAssembly2.0.jpg" alt="Nozzle assembly 2.0">
        </div>
        <div class="media-item">
          <img src="./nozzleAssembly2.1.jpg" alt="Nozzle assembly 2.1">
        </div>
      </div>

      <div class="assignment-content">
        After designing the nozzle assembly, I created a cylinder shape that would house the nozzle assembly such that the center of the nozzle would remain in the center of the cylinder regardless of its angle of rotation. I left cutouts in the cylinder so I could access the installation screws. This cylinder would have various additional components for the project.
      </div>
      <div class="media-gallery">
        <div class="media-item smaller">
          <img src="./nozzleAssembly2.2.jpg" alt="Nozzle assembly 2.2">
        </div>
      </div>

      <div class="assignment-content">
        In order to integrate the nozzle assembly into a flat tabletop, I decided to attach a servo to push/pull the cylinder to the left/right. This requires four parts: servo mount, a custom servo horn, the cylinder base attachment, and the rod that connects the servo horn to the cylinder base attachment. When designing the cylinder base and the servo horn, I had to be sure that the horn's mounting horn was the same length as the radius of the cylinder base. After mounting all the parts, I was left with the first iteration of my final project!
      </div>
      <div class="media-gallery">
        <div class="media-item">
          <img src="./nozzleAssembly2.3.jpg" alt="Nozzle assembly 2.3">
        </div>
        <div class="media-item">
          <video controls autoplay loop muted playsinline>
            <source src="./nozzleAssembly2.4.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        </div>
      </div>

      <div class="assignment-content">
        The bucket-lid prototype worked well, however I had a much larger scale in mind for the final product… so I built a table!
      </div>

      <div class="step-title">Step Three: Final iteration</div>
      <div class="assignment-content">
        I built a table out of the side of a wooden container and some leftover 2x4s in the lab. Building cross braces helped stabilize the legs and give the table sturdy support
      </div>
      <div class="media-gallery">
        <div class="media-item smaller">
          <img src="./table.jpg" alt="Table construction">
        </div>
      </div>

      <div class="assignment-content">
        After cutting holes in the table, I realized that the servo had terrible leverage on rotating the cylinder, so I added a second side to the servo horn. Now, the mechanism would push and pull to rotate at the same time.
      </div>
      <div class="media-gallery">
        <div class="media-item">
          <video controls autoplay loop muted playsinline>
            <source src="./nozzleAssembly3.0.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        </div>
        <div class="media-item">
          <video controls autoplay loop muted playsinline>
            <source src="./turnDemo.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        </div>
      </div>

      <div class="assignment-content">
        To sense where cups are, I landed on using hall effect sensors beneath the table to allow for a slick surface with good sensing ability. I designed a mount for large neodymium magnets to attach beneath white cups so that when the cups are above the sensors, it would pick up the magnetic waves. My grid of four sensors across the table are set to indicate the presence of a cup when the values derived from each sensor are greater than 3700, this leaves the perfect margin of error for the variability of the water stream and misalignment of the cup on the sensor. See the below demo video where the LED indicator switch turns on when a cup is present on the table.
      </div>
      <div class="media-gallery">
        <div class="media-item">
          <video controls autoplay loop muted playsinline>
            <source src="./sensingDemo.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        </div>
      </div>

      <div class="assignment-content">
        Controlling the water pump required a 120v relay, since the pump only worked when plugged into a wall outlet. I combatted this challenge by installing a power strip to the bottom of my table so, ultimately, the entire table could be independently standing with only a single plug. This would contribute greatly to the minimalist appearance and project integration. See my wiring and circuitry underneath the table or in the picture below!
      </div>
      <div class="media-gallery">
        <div class="media-item">
          <img src="./underTable1.jpg" alt="Under table wiring 1">
        </div>
        <div class="media-item">
          <img src="./underTable2.jpg" alt="Under table wiring 2">
        </div>
      </div>

      <div class="step-title">Step Four: Code!</div>
      <div class="assignment-content">
        This project had three main objectives: indicate when cups are present, have a "smart" switch, and account for multiple cups at the same time.
      </div>
      <div class="assignment-content">
        <strong>Indicate when cups are present:</strong> To accomplish this objective, I utilized a LED indicator switch. Whenever a sensor read >3700, a cup was considered present and the LED would update in real time.
      </div>
      <div class="assignment-content">
        <strong>"Smart" switch:</strong> In the scope of this project, to be considered "smart," the switch must only work if the table detects a cup (LED indicator is on) and account for edge cases (switch being on when the table powers on and switch left on while filling cups).
      </div>
      <div class="assignment-content">
        <strong>Account for multiple cups:</strong> When the switch is activated, the program will take a snapshot of which sensors detect cups, then sequence from one cup to the next until all cups have been filled.
      </div>

      <div class="step-title">Step Five: Test and finalize</div>
      <div class="assignment-content">
        After calibrating the water dispenser, I tested with singular and multiple cups, quickly realizing the importance of acquiring a waterproof table cloth.
      </div>
      <div class="media-gallery">
        <div class="media-item">
          <video controls autoplay loop muted playsinline>
            <source src="./test1.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        </div>
        <div class="media-item">
          <video controls autoplay loop muted playsinline>
            <source src="./test2.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        </div>
      </div>

      <div style="text-align: center; margin-top: 3rem;">
        <button class="back-button" onclick="switchView('finalProject')">
          View Final Project Summary
        </button>
      </div>

      <div class="download-buttons-group">
        <a href="./FinalCode.ino" download class="download-button">
          Download Final Code (.ino)
        </a>
        <a href="./Alex Mullen - PS70 CAD Files.zip" download class="download-button">
          Download CAD Files (.zip)
        </a>
      </div>
    </div>
  </div>
</div>
</body>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
  function switchView(view) {
    // Remove active class from all buttons and content sections
    document.querySelectorAll('.toggle-btn').forEach(btn => btn.classList.remove('active'));
    document.querySelectorAll('.content-section').forEach(section => section.classList.remove('active'));
    
    // Add active class to selected button and content
    if (view === 'finalProject') {
      document.getElementById('finalProjectBtn').classList.add('active');
      document.getElementById('finalProjectContent').classList.add('active');
    } else if (view === 'documentation') {
      document.getElementById('documentationBtn').classList.add('active');
      document.getElementById('documentationContent').classList.add('active');
    }
  }
</script>

</html>
